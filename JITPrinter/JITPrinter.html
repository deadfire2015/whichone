<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>仓储JIT匹配打单系统</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="xlsx.full.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        
    </style>
    <script src="imagePreview.js"></script>
    <script src="printUtils.js"></script>
    <script src="mappingUploader.js"></script>
    <script src="app.js"></script>
</head>

<body>

    <div class="container">
        <div class="container-grid">
            <!-- 左侧：数据预览区域 (70%) -->
            <div class="card preview-card">
                <div class="tab-buttons">
                    <div class="tab-group">
                        <button class="tab-btn active" data-tab="data">JIT生产明细</button>
                        <button class="tab-btn" data-tab="skc">空版检货汇总</button>
                        <button class="tab-btn" data-tab="pattern">烫画数量汇总</button>
                    </div>
                    <div class="button-group">
                        <button class="button download-tab-btn" id="downloadBtn">下载当前表</button>
                        <button class="button print-tab-btn" id="printTabBtn">打印当前表</button>
                    </div>
                </div>
                <div id="summaryHeader" class="summary-header">
                    <div>批次: <span id="batchNumber">--</span></div> |
                    <div>款型SKC总数: <span id="styleSKCCount">0</span> </div>|
                    <div>订单销售件数: <span id="orderQuantity">0</span> </div>|
                    <div>印花种类: <span id="printTypeCount">0</span> </div>
                </div>
                <div class="tab-container">

                    <div id="previewSection">
                        <ul id="dataPlaceholder" class="data-placeholder">
                            <li>1. 上传映射表,填写批次,点击成表单</li>
                            <li>2. 点击"打印当前表"按钮,预览所需表</li>
                            <li>3. 空版检货汇总-快速检货使用</li>
                            <li>4. 烫画数量汇总-叫不同大小的烫画</li>
                            <li>5. JIT生产明细-压烫和贴条码对照用</li>
                        </ul>
                        <div id="dataTable" class="tab-content active" data-tab="data"></div>
                        <div id="skcSummary" class="tab-content" data-tab="skc"></div>
                        <div id="patternSummary" class="tab-content" data-tab="pattern"></div>
                    </div>
                </div>
            </div>

            <!-- 右侧：上传控制面板 (30%) -->
            <div class="card upload-card">
                <div class="upload-section">
                    <div class="upload-title">JIT基础映射表</div>
                    <input type="file" id="mappingFileInput" class="file-input" accept=".xlsx,.xls" style="display:none;">
                    <button class="upload-btn" onclick="document.getElementById('mappingFileInput').click()">
                        选择Excel格式文件
                    </button>
                    <div class="upload-hint">需包含：SKU-SKC映射表、SKC2印花大小映射表、印花图片映射表</div>
                    <div id="mappingStatus" class="status">等待上传映射表...</div>
                    <div id="mappingError" class="error"></div>
                </div>
                <div class="upload-section">
                    <div class="upload-title">销售数据表</div>
                    <input type="file" id="salesFile" class="file-input" accept=".xlsx,.xls,.csv" disabled>
                    <button class="upload-btn" onclick="document.getElementById('salesFile').click()" id="salesBtn"
                        disabled>
                        选择Excel/CSV格式文件
                    </button>
                    <div id="salesStatus" class="status">请先上传映射表</div>
                    <div id="salesError" class="error"></div>
                </div>

                <div class="batch-input-section">
                    <label for="batchInput">批次:</label>
                    <input type="text" id="batchInput" class="batch-input" required placeholder="请输入批次号">
                </div>

                <div class="no-print">
                    <button class="preview-btn" id="previewBtn" disabled>生成表单</button>
                    <button class="preview-btn" id="downloadDeleteBtn" disabled>备份并删除选中数据</button>
                    <button class="preview-btn" id="copyBtn" disabled>下载条码表</button>
                    <button class="preview-btn" id="downloadEmptySheetBtn" disabled>下载空版组单表</button>
                </div>
            </div>
        </div>
    </div>

    <div id="toastContainer" class="toast-container"></div>
</body>

</html>